<meta charset="UTF-8">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/water.css@2/out/water.css">
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
<script type="text/javascript" src="./js/crypto.js"></script>


<label for="plain">平文</label>
<input id="plain" name="plain"></input>
<br />

<label for="pubkey">公開鍵</label>
<input id="pubkey" name="pubkey"></input>
<br />

<button onclick="gen_keys()">暗号化</button>
<br />

<label for="cipher">暗号文</label>
<input id="cipher" name="cipher"></input>



<script>
    const cipher = document.getElementById('cipher')
    const plain = document.getElementById('plain')
    const pubkey = document.getElementById('pubkey')

    const gen_keys = async () => {
        const rawPub = await decodeKey(pubkey.value, 'spki', "encrypt")
        cipher.value = await encrypt(plain.value, rawPub)
        console.log(rawPub)
    }
</script>